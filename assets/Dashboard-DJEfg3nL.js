import{u as B,r as t,f as D,q as F,o as O,h as P,j as e,i as V,k as _,l as c,n as W,p as $,t as z,v as G}from"./index-5P1SrYCb.js";function K(){const f=B(),[n,I]=t.useState([]),[x,m]=t.useState(""),[g,u]=t.useState(""),[o,p]=t.useState(""),[i,h]=t.useState(""),[j,y]=t.useState(!1),[N,a]=t.useState(null),[r,k]=t.useState(null),[E,v]=t.useState(!0),[A,L]=t.useState(!1);t.useEffect(()=>{const s=D(c,"cardone"),d=F(s,O("createdAt","desc")),M=P(d,{includeMetadataChanges:!0},l=>{const C=l.docs.map(S=>({...S.data(),id:S.id}));I(C),f(G(C)),L(l.metadata.hasPendingWrites),v(!1)},l=>{console.error("onSnapshot error:",l),a(l.message||"Firestore error"),v(!1)});return()=>M()},[f]);const b=()=>{m(""),u(""),p(""),h(""),k(null),a(null)},w=s=>/^https?:\/\//i.test(s.trim()),R=async()=>{if(a(null),!x.trim()||!g.trim()||!o.trim()){a("Please fill Title, Description and Img.");return}if(!w(o)||i&&!w(i)){a("Image URLs must start with http(s)://");return}y(!0);try{const s={title:x.trim(),description:g.trim(),img:o.trim(),img2:i.trim()||void 0};r?await V(_(c,"cardone",r),{...s}):await W(D(c,"cardone"),{...s,createdAt:$()}),b()}catch(s){console.error("Save failed:",s),a(s.message||"Save failed")}finally{y(!1)}},U=async s=>{if(s)try{await z(_(c,"cardone",s))}catch(d){console.error("Delete failed:",d),a(d.message||"Delete failed")}},T=s=>{k(s.id||null),m(s.title),u(s.description),p(s.img),h(s.img2||""),window.scrollTo({top:0,behavior:"smooth"})},q=t.useMemo(()=>Array.from({length:3}).map((s,d)=>e.jsxs("div",{className:"animate-pulse backdrop-blur-xl bg-dark-15/80 border border-dark-20 rounded-3xl overflow-hidden shadow-[0_15px_45px_rgba(0,0,0,0.4)]",children:[e.jsx("div",{className:"w-full h-56 sm:h-64 bg-dark-20"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-dark-20 rounded w-2/3 mb-3"}),e.jsx("div",{className:"h-4 bg-dark-20 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-dark-20 rounded w-5/6"}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-dark-20 flex gap-3",children:[e.jsx("div",{className:"h-10 w-24 bg-dark-20 rounded"}),e.jsx("div",{className:"h-10 w-24 bg-dark-20 rounded"})]})]})]},`sk-${d}`)),[]);return e.jsxs("div",{className:"min-h-screen font-roboto px-6 sm:px-10 lg:px-20 py-[200px]",children:[e.jsxs("header",{className:"mb-12 text-center",children:[e.jsx("h1",{className:"text-5xl font-extrabold tracking-tight mb-2 text-brown-70",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-70 text-base sm:text-lg flex items-center justify-center gap-3",children:["Manage your feature cards",A&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-lg bg-dark-20 border border-dark-30",children:"Syncingâ€¦"})]})]}),e.jsxs("section",{className:"max-w-5xl mx-auto backdrop-blur-xl bg-dark-15/0 border border-dark-20 rounded-3xl shadow-[0_20px_60px_rgba(0,0,0,0.45)] p-8 sm:p-10 mb-16",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-brown-70",children:r?"Edit Card":"Add New Card"}),r&&e.jsx("button",{onClick:b,className:"px-4 py-2 rounded-lg bg-dark-20 hover:bg-dark-30 text-gray-80 transition",children:"Cancel"})]}),N&&e.jsx("p",{className:"text-red-400 mb-5",children:N}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx("input",{className:"bg-dark-12/70 border border-dark-20 text-white p-4 rounded-xl outline-none focus:ring-2 focus:ring-secondary transition",placeholder:"Title",value:x,onChange:s=>m(s.target.value)}),e.jsx("input",{className:"bg-dark-12/70 border border-dark-20 text-white p-4 rounded-xl outline-none focus:ring-2 focus:ring-secondary transition",placeholder:"Description",value:g,onChange:s=>u(s.target.value)}),e.jsx("input",{className:"bg-dark-12/70 border border-dark-20 text-white p-4 rounded-xl outline-none focus:ring-2 focus:ring-secondary transition md:col-span-2",placeholder:"Img (Cloudinary URL)",value:o,onChange:s=>p(s.target.value)}),e.jsx("input",{className:"bg-dark-12/70 border border-dark-20 text-white p-4 rounded-xl outline-none focus:ring-2 focus:ring-secondary transition md:col-span-2",placeholder:"Img2 (optional Cloudinary URL)",value:i,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"mt-7 flex gap-4",children:[e.jsx("button",{onClick:R,disabled:j,className:"px-7 py-3 rounded-xl font-semibold text-lg bg-secondary text-white shadow-lg hover:opacity-90 transition disabled:opacity-50",children:j?"Saving...":r?"Update":"Add"}),!r&&e.jsx("button",{onClick:b,className:"px-7 py-3 rounded-xl font-medium bg-dark-20 hover:bg-dark-30 text-gray-80 transition",children:"Reset"})]})]}),e.jsxs("section",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl sm:text-3xl font-semibold text-brown-70",children:"All Cards"}),e.jsxs("span",{className:"text-gray-70 text-xs sm:text-sm",children:[n.length," item",n.length!==1?"s":""]})]}),E?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 my-media:grid-cols-3 gap-8 sm:gap-10",children:q}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 my-media:grid-cols-3 gap-8 sm:gap-10",children:[n.map(s=>e.jsxs("article",{className:"group backdrop-blur-xl bg-dark-15/80 border border-dark-20 rounded-3xl overflow-hidden shadow-[0_15px_45px_rgba(0,0,0,0.4)] hover:shadow-[0_28px_70px_rgba(0,0,0,0.55)] hover:scale-[1.02] transition-all duration-300 flex flex-col",children:[s.img&&e.jsx("img",{src:s.img,alt:"",className:"w-full h-56 sm:h-64 object-cover"}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[e.jsx("h4",{className:"text-xl sm:text-2xl font-bold mb-2",children:s.title}),e.jsx("p",{className:"text-gray-50 text-sm sm:text-base flex-1",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between gap-3 mt-6 pt-4 border-t border-dark-20",children:[e.jsx("button",{onClick:()=>T(s),className:"px-4 py-2 rounded-lg font-semibold bg-brown-70 text-dark-12 hover:opacity-90 transition",children:"Edit"}),e.jsx("button",{onClick:()=>U(s.id),className:"px-4 py-2 rounded-lg font-semibold bg-dark-20 hover:bg-dark-30 text-red-400 transition",children:"Delete"})]})]})]},s.id)),n.length===0&&e.jsx("p",{className:"text-gray-70 col-span-full text-center text-base sm:text-lg",children:"No cards yet"})]})]})]})}export{K as default};
